<!doctype html>
    <html>
      <head>
        <meta charset="utf-8">
        <link rel="preload" href="//fonts.googleapis.com/css?family=Asap:400,700" as="style">
        <link rel="preconnect" href="//fonts.gstatic.com" crossorigin>
        <meta name="viewport" content="initial-scale=1">
        <title>Page 5 - Shuhei Kagawa</title>
        <link rel="icons" sizes="16x16 32x32 48x48" href="/favicon.ico">
        <link rel="alternate" type="application/rss+xml" title="RSS Feed for shuheikagawa.com" href="/blog/feed/rss.xml">
        <link rel="stylesheet" href="//fonts.googleapis.com/css?family=Asap:400,700">
        <script>
          (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
          (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
          m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
          })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

          ga('create', 'UA-309586-8', 'shuheikagawa.com');
          ga('send', 'pageview');
        </script>
        <style>.hljs{display:block;overflow-x:auto;padding:.5em;background:#23241f}.hljs,.hljs-subst,.hljs-tag{color:#f8f8f2}.hljs-emphasis,.hljs-strong{color:#a8a8a2}.hljs-bullet,.hljs-link,.hljs-literal,.hljs-number,.hljs-quote,.hljs-regexp{color:#ae81ff}.hljs-code,.hljs-section,.hljs-selector-class,.hljs-title{color:#a6e22e}.hljs-strong{font-weight:700}.hljs-emphasis{font-style:italic}.hljs-attr,.hljs-keyword,.hljs-name,.hljs-selector-tag{color:#f92672}.hljs-attribute,.hljs-symbol{color:#66d9ef}.hljs-class .hljs-title,.hljs-params{color:#f8f8f2}.hljs-addition,.hljs-built_in,.hljs-builtin-name,.hljs-selector-attr,.hljs-selector-id,.hljs-selector-pseudo,.hljs-string,.hljs-template-variable,.hljs-type,.hljs-variable{color:#e6db74}.hljs-comment,.hljs-deletion,.hljs-meta{color:#75715e}body{background-color:#f8f8f2;font-family:Asap,sans-serif;padding:0;margin:0}::-moz-selection{background:#fbf42f}::selection{background:#fbf42f}a{color:#000;transition:color .3s ease}a:hover{color:#999}blockquote{border-left:10px solid #eeeee0;font-style:italic;padding:.1em 1.2em;margin-left:0;quotes:"\201C""\201D""\2018""\2019"}blockquote p:first-child:before{color:#ccccc0;content:open-quote;font-family:serif;font-size:3em;font-weight:700;line-height:.1em;margin-right:.2em;vertical-align:-.4em}blockquote cite{color:#999990}blockquote cite:before{content:"- "}.header{padding:25px 0 10px;text-align:center}.header__title{margin:0 0 15px}.header__title a{text-decoration:none}.menu{list-style-position:outside;list-style-type:none;padding:10px 0;margin:0}.menu__item{display:inline-block;padding:0 20px}.menu__item a{font-weight:700;text-decoration:none}.footer{padding:30px 0;text-align:center}.title a{text-decoration:none}.post,.post-list{background:#fff;border-top:8px solid #fbf52f;padding:30px 0 20px}.post{margin:0 0 40px}.post:last-child{margin-bottom:0}.post .content,.post .post-header{margin:0 auto;width:700px}.post .title{margin:0}.post .meta{color:#999;font-size:small;margin:10px 0 25px}.post-list .title{margin:0 auto 10px;width:700px}.post-list-item{line-height:1.6em;padding:10px 0;margin:0 auto;width:700px}.post-list-item:after{content:"";clear:both;display:block}.post-list-item__date{color:#999;float:left;font-size:small;width:80px}.post-list-item__title{font-size:large;float:left;width:620px;margin:0}.post-list-item__title a{font-weight:700;text-decoration:none}.content{line-height:1.6em}.content img{max-width:100%}.social-buttons{margin:2em 0 0}.comments{margin:0 auto 3em;width:700px}.table-wrapper{overflow-x:auto}table{border-collapse:collapse;margin:2em 0}th{font-weight:400;text-align:left}tbody{border-top:1px solid #333;padding:.5em 0}td,th{padding-right:1em}.hljs{line-height:1.5em;padding:15px 20px;overflow-x:auto}code{background-color:#f8f8f2;padding:.1em .2em;font-size:.85em;font-family:Monaco,'Lucida Console',monospace}.code__filename{display:inline-block;margin-bottom:13px;padding:5px 10px;font-size:.85em;background-color:#666}.pagination{list-style-position:outside;list-style-type:none;padding:0;margin:-20px auto 0;width:700px}.pagination:after{content:"";clear:both;display:block}.pagination li{float:left;font-weight:700;min-height:1em}.pagination a{text-decoration:none}.pagination__prev-page{float:left;width:35%}.pagination__prev-page a:before{content:"< "}.pagination__next-page{float:right;text-align:right;width:35%}.pagination__next-page a:after{content:" >"}.pagination__archives{text-align:center;width:30%}@media only screen and (max-width:767px){h1{font-size:24px}.comments,.pagination,.post .content,.post .post-header,.post-list .title,.post-list-item{margin-left:20px;margin-right:20px;width:auto}.post-list-item__title{width:100%}.hljs{margin-left:-20px;margin-right:-20px;padding:1.4em 20px}}</style>
      </head>
      <body>
        <div id="container">
  <div>
    <header class="header">
      <h1 class="header__title">
        <a href="/">Shuhei Kagawa</a>
      </h1>
      <nav>
        <ul class="menu">
          <li class="menu__item">
            <a href="/about/">About</a>
          </li>
          <li class="menu__item">
            <a href="/works/">Works</a>
          </li>
          <li class="menu__item">
            <a href="/blog/archives/">Archives</a>
          </li>
        </ul>
      </nav>
    </header>
    <div class="main">
      
    <div>
      
    <div class="post">
      <div class="post-header">
        <h1 class="title">
          <a href=/blog/2016/04/05/one-time-binding-for-ng-if/>One-time binding for ng-if</a>
        </h1>
        <div class="meta">
          <span class="date">Apr 5, 2016</span>
          - <span class="category">JavaScript</span>, <span class="category">AngularJS</span>
        </div>
      </div>
      <div class="content">
        <div>
          <p>AngularJS&#39;s <a href="https://docs.angularjs.org/guide/expression#one-time-binding">one-time binding</a> is useful to reduce the number of watches. It stops watching its expression once it becomes defined. It kindly keeps watching while the value is <code>undefined</code> for cases like asynchronous data fetching. But the kindness can be a pitfall especially for directives that take <code>boolean</code> expressions like <code>ng-if</code>.</p>
<p>Here&#39;s an ordinary piece of AngularJS template. It shows &#39;Something&#39; when <code>obj.prop</code> exists.</p>
<pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">ng-if</span>=<span class="hljs-string">"::obj.prop"</span>&gt;</span>Something<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></code></pre><p>It works almost fine. But it keeps watching the expression when the message is hidden. Guess what?</p>
<p>Yes! It keeps watching while the expression is <code>undefined</code>. Let&#39;s make sure that it&#39;s always <code>boolean</code>.</p>
<pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">ng-if</span>=<span class="hljs-string">"::!!obj.prop"</span>&gt;</span>Something<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></code></pre><p>Here we see the birth of a new operator <code>::!!</code>!</p>

        </div>
      </div>
    </div>
  ,
    <div class="post">
      <div class="post-header">
        <h1 class="title">
          <a href=/blog/2016/01/11/freeze-panes-with-css-and-a-bit-of-javascript/>Freeze panes with CSS and a bit of JavaScript</a>
        </h1>
        <div class="meta">
          <span class="date">Jan 11, 2016</span>
          - <span class="category">CSS</span>, <span class="category">JavaScript</span>
        </div>
      </div>
      <div class="content">
        <div>
          <p>People want fixed-header table. It reminds you what the columns are while you scroll down the table. There are a bunch of fixed-header-table tutorials out there. But most of them kill one of the greatest features of HTML table. The automatic sizing of cells according to their contents. This is because they usually prepare separate <code>&lt;table&gt;</code>s for header and body.</p>
<p>Also, most of the tutorials only fix a header at the top. But my colleagues wanted more. They wanted to fix headers at the top and left. Just like <a href="http://www.gcflearnfree.org/excel2013/17">Microsoft Excel&#39;s Freeze Panes feature</a>. So what we want now is:</p>
<ol>
<li>Automatic sizing of cells according to their contents</li>
<li>Freeze panes</li>
</ol>
<p>We want to use only one <code>&lt;table&gt;</code> to easily achive the goal 1. But at the same time, we want to separate the movement of the headers from other cells to achieve the goal 2. Then <a href="https://developer.mozilla.org/en-US/docs/Web/CSS/transform">CSS3&#39;s <code>transform</code> property</a> came to my mind. It allows you to transform <strong>only rendering</strong> of an element without interfering its sibling nodes.</p>
<p>So I gave it a shot and here&#39;s the result.</p>
<p><a href="https://jsbin.com/katabi/edit" target="_blank">JS Bin on jsbin.com</a></p>
<h2 id="transform-translate-">transform: translate()</h2>
<p>I used JavaScript to dynamically set <code>transform: translate(x, y);</code> to the header cells sending them back to the top/left edge of the container.</p>
<pre><code class="hljs js">container.addEventListener(<span class="hljs-string">'scroll'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
  <span class="hljs-keyword">var</span> x = container.scrollLeft;
  <span class="hljs-keyword">var</span> y = container.scrollTop;

  leftHeaders.forEach(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">leftHeader</span>) </span>{
    leftHeader.style.transform = translate(x, <span class="hljs-number">0</span>);
  });
  topHeaders.forEach(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">topHeader, i</span>) </span>{
    <span class="hljs-keyword">if</span> (i === <span class="hljs-number">0</span>) {
      topHeader.style.transform = translate(x, y);
    } <span class="hljs-keyword">else</span> {
      topHeader.style.transform = translate(<span class="hljs-number">0</span>, y);
    }
  });
});

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">translate</span>(<span class="hljs-params">x, y</span>) </span>{
  <span class="hljs-keyword">return</span> <span class="hljs-string">'translate('</span> + x + <span class="hljs-string">'px, '</span> + y + <span class="hljs-string">'px)'</span>;
}</code></pre><h2 id="border-collapse-separate-">border-collapse: separate;</h2>
<p>Another trick is <code>border-collapse: separate;</code>. We usually use <code>border-collapse: collapse;</code> for tables but it leaves borders behind the cells. With <code>border-collapse: collapse;</code>, we can make the borders transformed together with the header cells.</p>
<pre><code class="hljs css"><span class="hljs-selector-tag">table</span> {
  <span class="hljs-attribute">border-collapse</span>: separate;
  <span class="hljs-attribute">border-spacing</span>: <span class="hljs-number">0</span>;
}

<span class="hljs-selector-tag">th</span>,
<span class="hljs-selector-tag">td</span> {
  <span class="hljs-attribute">border-bottom</span>: <span class="hljs-number">1px</span> solid <span class="hljs-number">#ccc</span>;
  <span class="hljs-attribute">border-right</span>: <span class="hljs-number">1px</span> solid <span class="hljs-number">#ccc</span>;
}</code></pre><h2 id="dummy-top-left-header-cell">Dummy top left header cell</h2>
<p>The last trick is a kind of shame. It&#39;s the top left header cell that should be fixed horizontally and vertically. We can achieve it by the <code>transform</code> property but the other top header cells hides it. I tried to make it rise with <code>z-index</code> but didn&#39;t work. So I created a dummy element that had the same size with the cell.</p>
<pre><code class="hljs js"><span class="hljs-keyword">var</span> topLeft = <span class="hljs-built_in">document</span>.createElement(<span class="hljs-string">'div'</span>);
<span class="hljs-keyword">var</span> computed = <span class="hljs-built_in">window</span>.getComputedStyle(columnHeaders[<span class="hljs-number">0</span>]);
container.appendChild(topLeft);
topLeft.classList.add(<span class="hljs-string">'top-left'</span>);
topLeft.style.width = computed.width;
topLeft.style.height = computed.height;</code></pre><pre><code class="hljs css"><span class="hljs-selector-class">.top-left</span> {
  <span class="hljs-attribute">background</span>: <span class="hljs-number">#eee</span>;
  <span class="hljs-attribute">border-right</span>: <span class="hljs-number">1px</span> solid <span class="hljs-number">#ccc</span>;
  <span class="hljs-attribute">border-bottom</span>: <span class="hljs-number">1px</span> solid <span class="hljs-number">#ccc</span>;
  <span class="hljs-attribute">box-sizing</span>: border-box;
  <span class="hljs-attribute">position</span>: absolute;
  <span class="hljs-attribute">top</span>: <span class="hljs-number">0</span>;
  <span class="hljs-attribute">left</span>: <span class="hljs-number">0</span>;
}</code></pre><h2 id="compatibility-and-performance">Compatibility and performance</h2>
<p>As far as I&#39;ve tested with the latest Chrome, Firefox and Safari on Mac, it worked well without any performance issue. I&#39;ll test it with more large table on other browsers including IE and add the result later.</p>

        </div>
      </div>
    </div>
  ,
    <div class="post">
      <div class="post-header">
        <h1 class="title">
          <a href=/blog/2015/11/29/algorithms-part-1/>Algorithms: Design and Analysis, Part 1</a>
        </h1>
        <div class="meta">
          <span class="date">Nov 29, 2015</span>
          - <span class="category">Algorithms</span>
        </div>
      </div>
      <div class="content">
        <div>
          <p>Today I finished the final exam of Stanford&#39;s <a href="https://www.coursera.org/course/algo">&quot;Algorithms: Design and Analysis, Part 1&quot;</a> at Coursera. I solved all its programming assignments with JavaScript and put the solutions at GitHub:</p>
<ul>
<li><a href="https://github.com/shuhei/algo">shuhei/algo</a></li>
</ul>
<p>The course focused on fundamental algorithms and their analysis. What I learned so far were:</p>
<ul>
<li><a href="https://en.wikipedia.org/wiki/Divide_and_conquer_algorithms">Divide-and-conquer algorithms</a> and analysis with <a href="https://en.wikipedia.org/wiki/Master_theorem">Master Method</a>: <a href="https://en.wikipedia.org/wiki/Merge_sort">merge sort</a> and <a href="https://en.wikipedia.org/wiki/Quicksort">quick sort</a></li>
<li>Graph algorithms: <a href="https://en.wikipedia.org/wiki/Minimum_cut">minimum cut</a>, <a href="https://en.wikipedia.org/wiki/Depth-first_search">depth-first</a> and <a href="https://en.wikipedia.org/wiki/Breadth-first_search">breadth-first</a> search, <a href="https://en.wikipedia.org/wiki/Strongly_connected_component">strongly connected components</a>, <a href="https://en.wikipedia.org/wiki/Dijkstra%27s_algorithm">Dijkstra&#39;s shortest-path</a></li>
<li>Data structures: <a href="https://en.wikipedia.org/wiki/Heap_(data_structure">heaps</a>, <a href="https://en.wikipedia.org/wiki/Hash_table">hash tables</a> and <a href="https://en.wikipedia.org/wiki/Binary_search_tree">binary search trees</a></li>
</ul>
<p>As a self-taught programmer, I had been away from formal Computer Science topics like big O notation. But after I learned <a href="https://www.coursera.org/learn/machine-learning">Machine Learning</a> and tried to implement some ML algorithms for large datasets a few months ago, I noticed that I needed some knowledge of basic algorithms and mathematical analysis of them.</p>
<p>The Algorithms course focused not only on algorithms themselves but also on their performance analysis and mathematical proofs. The analysis and proofs are crucial especially for the cases when we design custom algorithms for real-world problems in the future, and more importantly made me more confident about the algorithms.</p>
<p>Another good side effect of the course was that I got interested in Mathematics. Through the course and a study meetings on <a href="https://mitpress.mit.edu/sicp/">SICP</a> with my co-workers, I noticed that Mathematics is interesting but I lacked some prerequisites to understand it. At the moment, I came across <a href="http://www.amazon.com/Introduction-Mathematical-Thinking-Keith-Devlin/dp/0615653634">Introduction to Mathematical Thinking</a> by Keith Devlin. It was written to fill the gap between the school math, which focuses following given procedures, and the college math, which focuses on thinking. It is perfect for someone like me, who skipped proper Mathematics training at college. I am still on the way reading it but it already started working on my analysis of the SICP exercises.</p>
<p><a href="https://www.coursera.org/course/algo2">The part 2 of the course</a> will start probably on March 2016. I cannot wait for it to start and get my eyes open again.</p>

        </div>
      </div>
    </div>
  
      <ul class="pagination">
        <li class="pagination__prev-page">
          <a href=/blog/pages/4/>Newer Posts</a>
        </li>
        <li class="pagination__archives">
          <a href="/blog/archives/">Archives</a>
        </li>
        <li class="pagination__next-page">
          <a href=/blog/pages/6/>Older Posts</a>
        </li>
      </ul>
    </div>
  
    </div>
    <footer class="footer">
      Â© Shuhei Kagawa
    </footer>
  </div>
</div>
      </body>
    </html>