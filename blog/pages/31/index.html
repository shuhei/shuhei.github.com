<!doctype html><html lang="en"><head><meta charset="utf-8"><link rel="preload" href="https://fonts.gstatic.com/s/dmmono/v10/aFTU7PB1QTsUX8KYthqQBK6PYK0.woff2" as="font" crossorigin="anonymous"><link rel="preload" href="https://fonts.gstatic.com/s/librebaskerville/v14/kmKhZrc3Hgbbcjq75U4uslyuy4kn0qNcWxEQDO-Wyrs.woff2" as="font" crossorigin="anonymous"><link rel="preload" href="https://fonts.gstatic.com/s/librebaskerville/v14/kmKnZrc3Hgbbcjq75U4uslyuy4kn0qNZaxMaC82U.woff2" as="font" crossorigin="anonymous"><link rel="preload" href="https://fonts.gstatic.com/s/librefranklin/v13/jizOREVItHgc8qDIbSTKq4XkRg8T88bjFuXOnduhycKkANDPTedX18mE.woff" as="font" crossorigin="anonymous"><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin=""><meta name="viewport" content="width=device-width,initial-scale=1"><title>Shuhei Kagawa</title><link rel="icon" sizes="16x16 32x32 48x48" href="/favicon.ico"><link rel="alternate" type="application/atom+xml" title="Atom feed of Shuhei Kagawa" href="/blog/feed.xml"><style>:root{--bg-color:#f9f9f9;--text-color:#222;--highlight-color:#095ae8;--code-text-color:var(--code-mono-1);--code-bg-color:#fff;--syntax-hue:230;--syntax-saturation:1%;--syntax-brightness:100%;--code-mono-1:hsl(var(--syntax-hue),8%,24%);--code-mono-2:hsl(var(--syntax-hue),6%,44%);--code-mono-3:hsl(var(--syntax-hue),4%,64%);--code-hue-1:#0184bc;--code-hue-2:#1d56d3;--code-hue-3:#a626a4;--code-hue-4:#188816;--code-hue-5:#ce3527;--code-hue-5-2:#ca1243;--code-hue-6:#986801;--code-hue-6-2:#986801;--body-font-family:"Libre Baskerville",serif;--heading-font-family:"Libre Franklin",sans-serif;--code-font-family:"DM Mono",monospace}body{background:#f9f9f9;background:var(--bg-color);color:#222;color:var(--text-color);font-family:Libre Baskerville,serif;font-family:var(--body-font-family);font-size:16px;line-height:1.9;margin:0;padding:0}.container{margin:0 auto;padding:0 20px;width:700px}a{color:#095ae8;color:var(--highlight-color);text-decoration:none;transition:color .5s ease}a:hover{text-decoration:underline}.header{display:flex;padding:1.5em 0 1em}.header__title{flex-grow:1;font-size:1em;font-weight:400;margin:0 10px 0 0}.header__title a{color:#222;color:var(--text-color)}.header__nav{flex-grow:0}.menu{list-style-position:outside;list-style-type:none;margin:0;padding:0;text-align:right}.menu__item{display:inline-block;padding:0 0 0 .7em}.menu__item a{color:#222;color:var(--text-color)}.footer{padding:3em 0 4em;text-align:center}.title{font-family:Libre Franklin,sans-serif;font-family:var(--heading-font-family);font-size:3em;line-height:1.1;margin:0 0 .2em}.title a{color:#222;color:var(--text-color);text-decoration:none}.post,.post-list{padding:1.7em 0 1.25em}.post:after{content:"* * *";display:block;font-family:Libre Franklin,sans-serif;font-family:var(--heading-font-family);font-size:4.5em;font-weight:700;line-height:1;margin:.9em auto 0;text-align:center}.post .meta{font-size:.75em}.post-list .title{margin-bottom:10px}.post-list-item{display:flex;line-height:1.6em;padding:10px 0}.post-list-item__date{flex-shrink:0;font-size:.8em;width:8em}.post-list-item__title{font-family:Libre Franklin,sans-serif;font-family:var(--heading-font-family);font-size:1.3em;font-weight:700;margin:0}.post-list-item__title a{color:#222;color:var(--text-color);text-decoration:none}.content h2,.content h3,.content h4,.content h5,.content h6{font-family:Libre Franklin,sans-serif;font-family:var(--heading-font-family);margin:1em 0 0}.content h2{font-size:2.2em;line-height:1.1}.content h3{font-size:1.6em;line-height:1.3}.content h4{font-size:1.2em}.content img{height:auto;max-width:100%}.content p{margin:1.15em 0}.img-wrapper{display:block;text-align:center}.comments{margin-bottom:3em}ol,ul{list-style-position:outside;padding-left:1.4em}.table-wrapper{margin:1.15em 0;overflow-x:auto}.table-wrapper table{border-collapse:collapse;margin:0;width:100%}tr{vertical-align:top}th{font-weight:400;text-align:left}tbody{border-bottom:1px solid #333;border-top:1px solid #333;padding:.5em 0}td,th{padding-right:1em}code{background-color:#fff;background-color:var(--code-bg-color);color:#383a42;color:var(--code-text-color);font-family:DM Mono,monospace;font-family:var(--code-font-family);font-size:.9em;padding:0 .3em}.code__filename{background-color:#666;display:inline-block;font-size:.85em;margin-bottom:13px;padding:5px 10px}.hljs{-webkit-overflow-scrolling:touch;background-color:#fff;background-color:var(--code-bg-color);color:#383a42;color:var(--code-text-color);display:block;line-height:1.5em;overflow-x:auto;padding:1em 20px}.hljs-comment,.hljs-quote{color:#696c77;color:var(--code-mono-2);font-style:italic}.hljs-doctag,.hljs-formula,.hljs-keyword{color:#a626a4;color:var(--code-hue-3)}.hljs-deletion,.hljs-name,.hljs-section,.hljs-selector-tag,.hljs-subst{color:#ce3527;color:var(--code-hue-5)}.hljs-literal{color:#0184bc;color:var(--code-hue-1)}.hljs-addition,.hljs-attribute,.hljs-meta-string,.hljs-regexp,.hljs-string{color:#188816;color:var(--code-hue-4)}.hljs-built_in,.hljs-class .hljs-title{color:#986801;color:var(--code-hue-6-2)}.hljs-attr,.hljs-number,.hljs-selector-attr,.hljs-selector-class,.hljs-selector-pseudo,.hljs-template-variable,.hljs-type,.hljs-variable{color:#986801;color:var(--code-hue-6)}.hljs-bullet,.hljs-link,.hljs-meta,.hljs-selector-id,.hljs-symbol,.hljs-title{color:#1d56d3;color:var(--code-hue-2)}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}.hljs-link{text-decoration:underline}blockquote{font-style:italic;margin:1.5em 0;padding:0 0 0 2em}blockquote p:first-child:before{content:open-quote;font-family:serif;font-size:3em;font-weight:700;line-height:.1em;margin-right:.2em;vertical-align:-.4em}blockquote cite{color:#999990}blockquote cite:before{content:"- "}.pagination{display:flex;justify-content:space-between;list-style-position:outside;list-style-type:none;margin-top:20px;padding:0}.pagination__next-page,.pagination__prev-page{width:46%}.pagination__next-page{text-align:right}.footer-nav{text-align:center}@media only screen and (max-width:767px){body{font-size:15px;line-height:1.65}.container{width:auto}.post,.post-list{padding-top:10px}.post-list-item{display:block}.hljs{border-radius:0;margin-left:-20px;margin-right:-20px;padding:1.4em 20px}li .hljs{margin-left:0}.img-wrapper{margin-left:-20px;margin-right:-20px}}@font-face{font-display:swap;font-family:DM Mono;font-style:normal;font-weight:400;src:url(https://fonts.gstatic.com/s/dmmono/v10/aFTU7PB1QTsUX8KYthSQBK6PYK3EXw.woff2) format("woff2");unicode-range:u+0100-024f,u+0259,u+1e??,u+2020,u+20a0-20ab,u+20ad-20cf,u+2113,u+2c60-2c7f,u+a720-a7ff}@font-face{font-display:swap;font-family:DM Mono;font-style:normal;font-weight:400;src:url(https://fonts.gstatic.com/s/dmmono/v10/aFTU7PB1QTsUX8KYthqQBK6PYK0.woff2) format("woff2");unicode-range:u+00??,u+0131,u+0152-0153,u+02bb-02bc,u+02c6,u+02da,u+02dc,u+2000-206f,u+2074,u+20ac,u+2122,u+2191,u+2193,u+2212,u+2215,u+feff,u+fffd}@font-face{font-display:swap;font-family:Libre Baskerville;font-style:italic;font-weight:400;src:url(https://fonts.gstatic.com/s/librebaskerville/v14/kmKhZrc3Hgbbcjq75U4uslyuy4kn0qNcWx8QDO-WyrubOA.woff2) format("woff2");unicode-range:u+0100-024f,u+0259,u+1e??,u+2020,u+20a0-20ab,u+20ad-20cf,u+2113,u+2c60-2c7f,u+a720-a7ff}@font-face{font-display:swap;font-family:Libre Baskerville;font-style:italic;font-weight:400;src:url(https://fonts.gstatic.com/s/librebaskerville/v14/kmKhZrc3Hgbbcjq75U4uslyuy4kn0qNcWxEQDO-Wyrs.woff2) format("woff2");unicode-range:u+00??,u+0131,u+0152-0153,u+02bb-02bc,u+02c6,u+02da,u+02dc,u+2000-206f,u+2074,u+20ac,u+2122,u+2191,u+2193,u+2212,u+2215,u+feff,u+fffd}@font-face{font-display:swap;font-family:Libre Baskerville;font-style:normal;font-weight:400;src:url(https://fonts.gstatic.com/s/librebaskerville/v14/kmKnZrc3Hgbbcjq75U4uslyuy4kn0qNXaxMaC82U-ro.woff2) format("woff2");unicode-range:u+0100-024f,u+0259,u+1e??,u+2020,u+20a0-20ab,u+20ad-20cf,u+2113,u+2c60-2c7f,u+a720-a7ff}@font-face{font-display:swap;font-family:Libre Baskerville;font-style:normal;font-weight:400;src:url(https://fonts.gstatic.com/s/librebaskerville/v14/kmKnZrc3Hgbbcjq75U4uslyuy4kn0qNZaxMaC82U.woff2) format("woff2");unicode-range:u+00??,u+0131,u+0152-0153,u+02bb-02bc,u+02c6,u+02da,u+02dc,u+2000-206f,u+2074,u+20ac,u+2122,u+2191,u+2193,u+2212,u+2215,u+feff,u+fffd}@font-face{font-display:swap;font-family:Libre Franklin;font-style:normal;font-weight:700;src:url(https://fonts.gstatic.com/s/librefranklin/v13/jizOREVItHgc8qDIbSTKq4XkRg8T88bjFuXOnduhycKkD9DPTedX18mETQw.woff) format("woff");unicode-range:u+0102-0103,u+0110-0111,u+0128-0129,u+0168-0169,u+01a0-01a1,u+01af-01b0,u+1ea0-1ef9,u+20ab}@font-face{font-display:swap;font-family:Libre Franklin;font-style:normal;font-weight:700;src:url(https://fonts.gstatic.com/s/librefranklin/v13/jizOREVItHgc8qDIbSTKq4XkRg8T88bjFuXOnduhycKkDtDPTedX18mETQw.woff) format("woff");unicode-range:u+0100-024f,u+0259,u+1e??,u+2020,u+20a0-20ab,u+20ad-20cf,u+2113,u+2c60-2c7f,u+a720-a7ff}@font-face{font-display:swap;font-family:Libre Franklin;font-style:normal;font-weight:700;src:url(https://fonts.gstatic.com/s/librefranklin/v13/jizOREVItHgc8qDIbSTKq4XkRg8T88bjFuXOnduhycKkANDPTedX18mE.woff) format("woff");unicode-range:u+00??,u+0131,u+0152-0153,u+02bb-02bc,u+02c6,u+02da,u+02dc,u+2000-206f,u+2074,u+20ac,u+2122,u+2191,u+2193,u+2212,u+2215,u+feff,u+fffd}</style><meta name="description" content="A personal website of Shuhei Kagawa. I write mostly on web technologies and life."><meta name="twitter:card" content="summary_large_image"><meta name="twitter:site" content="@shuheikagawa"><meta property="og:title" content="Shuhei Kagawa"><meta property="og:site_name" content="Shuhei Kagawa"><meta property="og:description" content="A personal website of Shuhei Kagawa. I write mostly on web technologies and life."></head><body><div class="container"><header class="header"><h1 class="header__title"><a href="/">Shuhei Kagawa</a></h1><nav class="header__nav"><ul class="menu"><li class="menu__item"><a href="/about/">About</a></li><li class="menu__item"><a href="/blog/archives/">All posts</a></li></ul></nav></header><div class="main"><div class="post"><div class="post-header"><h1 class="title"><a href="/blog/2009/10/11/python-challenge-from-6-to-7/">Python Challenge Lv. 6 - 7</a></h1><div class="meta"><span class="date">Oct 11, 2009</span></div></div><div class="content"><div><p>システムアーキテクトの試験が来週末に迫っているのですが、またまたやってしまいました。現実逃避。 試験前ということを除けば、面白いし、自然と勉強になるので良いのですけどね。</p><h2>Level 6</h2><p>アドレスバーに何度も channel.zip と入れるも、ファイルがダウンロードされていることになかなか気付かず。気付いてファイルを解凍し、Level 4 的なプログラムで “Collect the comments.” に辿りつきましたが、意味がわかりません。 少しカンニングしてみると、ZIP ファイルは中身のファイル毎にコメントを付けられるのだとか。Python の zipfile モジュールで見られるらしいので、やってみました。</p><pre><code class="hljs py">num = <span class="hljs-string">"90052"</span>
z = zipfile.ZipFile(<span class="hljs-string">"channel.zip"</span>)

<span class="hljs-keyword">while</span> <span class="hljs-literal">True</span>:
  <span class="hljs-comment"># Print file's comment</span>
  <span class="hljs-built_in">print</span> z.getinfo(num + <span class="hljs-string">".txt"</span>).comment,
  <span class="hljs-comment"># Get next nothing</span>
  s = <span class="hljs-built_in">open</span>(num + <span class="hljs-string">".txt"</span>).read()
  m = pattern.<span class="hljs-keyword">match</span>(s)
  <span class="hljs-keyword">if</span> m:
    num = m.group(<span class="hljs-number">1</span>)
  <span class="hljs-keyword">else</span>:
    <span class="hljs-keyword">break</span>
</code></pre><p>Python で改行なしの出力をするには <code>print "foo",</code> なんですね。 いつのまにか Python で解いてしまってますね・・・。</p><h2>Level 7</h2><pre><code class="hljs py"><span class="hljs-keyword">from</span> PIL <span class="hljs-keyword">import</span> Image
image = Image.<span class="hljs-built_in">open</span>(<span class="hljs-string">"oxygen.png"</span>)
width = image.size[<span class="hljs-number">0</span>]
data = <span class="hljs-built_in">list</span>(image.getdata())

before = <span class="hljs-number">0</span>
message = <span class="hljs-string">""</span>
<span class="hljs-keyword">for</span> x <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(width):
  tmp = data[x + width * <span class="hljs-number">46</span>][<span class="hljs-number">0</span>]
  <span class="hljs-keyword">if</span> tmp != before:
    message += <span class="hljs-string">"%c"</span> % (tmp)
    before= tmp

<span class="hljs-built_in">print</span> message
</code></pre><p>これで下記メッセージが表示されるのですが、この配列の意味がわかりません・・・。</p><blockquote><p>smart guy, you made it. the next level is [105, 10, 16, 101, 103, 14, 105, 16, 121]ljljlimkljhdfdcdfa]_a</p></blockquote><p>少しカンニングをして気がついたのですが、 <code>if tmp != before:</code> としているのがマズかったようです。これだと同じ文字が続く場合に無視されてしまいます。 気を取り直して以下。書き方も少し Python らしく（？）。 <code>chr</code> という関数があったんですね。</p><pre><code class="hljs py"><span class="hljs-keyword">from</span> PIL <span class="hljs-keyword">import</span> Image
image = Image.<span class="hljs-built_in">open</span>(<span class="hljs-string">"oxygen.png"</span>)
width = image.size[<span class="hljs-number">0</span>]
data = <span class="hljs-built_in">list</span>(image.getdata())
message = []
i = <span class="hljs-number">0</span>
<span class="hljs-keyword">while</span> <span class="hljs-literal">True</span>:
  color = data[i + width * <span class="hljs-number">46</span>]
  <span class="hljs-keyword">if</span> color[<span class="hljs-number">0</span>] == color[<span class="hljs-number">1</span>] == color[<span class="hljs-number">2</span>]:
    message.append(color[<span class="hljs-number">2</span>])
    i += <span class="hljs-number">7</span>
  <span class="hljs-keyword">else</span>:
    <span class="hljs-keyword">break</span>

<span class="hljs-built_in">print</span> <span class="hljs-string">""</span>.join(<span class="hljs-built_in">map</span>(<span class="hljs-built_in">chr</span>, message))
</code></pre><p>出てきたメッセージから答えを出します。</p><pre><code class="hljs py"><span class="hljs-built_in">print</span> <span class="hljs-string">""</span>.join(<span class="hljs-built_in">map</span>(<span class="hljs-built_in">chr</span>, [<span class="hljs-number">105</span>, <span class="hljs-number">110</span>, <span class="hljs-number">116</span>, <span class="hljs-number">101</span>, <span class="hljs-number">103</span>, <span class="hljs-number">114</span>, <span class="hljs-number">105</span>, <span class="hljs-number">116</span>, <span class="hljs-number">121</span>]))
</code></pre><p>何だかカンニングしてばかりですね・・・。</p></div></div></div><div class="post"><div class="post-header"><h1 class="title"><a href="/blog/2009/10/11/grasse/">草</a></h1><div class="meta"><span class="date">Oct 11, 2009</span></div></div><div class="content"><div><p><span class="img-wrapper"><picture><source type="image/avif" srcset="/cached/PVT_aP_SOk-495.avif 495w" sizes="(max-width: 767px) calc(100vw - 40px), 700px"><source type="image/webp" srcset="/cached/PVT_aP_SOk-495.webp 495w" sizes="(max-width: 767px) calc(100vw - 40px), 700px"><img alt="Grasses.pde" loading="lazy" decoding="async" style="background-size: cover; background-image: url(&quot;data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http%3A//www.w3.org/2000/svg' xmlns%3Axlink='http%3A//www.w3.org/1999/xlink' viewBox='0 0 15 4'%3E %3Cfilter id='b' color-interpolation-filters='sRGB'%3E %3CfeGaussianBlur stdDeviation='.5'%3E%3C/feGaussianBlur%3E %3CfeComponentTransfer%3E %3CfeFuncA type='discrete' tableValues='1 1'%3E%3C/feFuncA%3E %3C/feComponentTransfer%3E %3C/filter%3E %3Cimage filter='url(%23b)' x='0' y='0' height='100%25' width='100%25' xlink%3Ahref='data%3Aimage/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA8AAAAECAIAAADec/LeAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAcUlEQVQImZXCUQqCQBAA0L3/FQxU0ohglQj3I7pIEArOzow7JP2IO/ujXaEez2z79nuz/8OI0rgO/fJ8JxH1Qf24vubEIfo5yRThk4QjsIIompZOFvMWDo7PHZaOygYyi0VH9Q2Pjuo7X65YNVg9gv0Cb4Kkf1tuFgYAAAAASUVORK5CYII='%3E %3C/image%3E %3C/svg%3E&quot;)" src="/cached/PVT_aP_SOk-495.png" width="495" height="140"></picture></span></p><p>パソコンの中にあったのを、絵作りのとこだけアップ。そういえば、何か作っていたのでした。 備忘のために。</p><pre><code class="hljs processing"><span class="hljs-type">int</span> NUM;
<span class="hljs-type">float</span>[] grasses;

<span class="hljs-keyword">void</span> <span class="hljs-title function_">setup</span>()
{
  <span class="hljs-built_in">size</span>(<span class="hljs-number">495</span>, <span class="hljs-number">140</span>);
  <span class="hljs-built_in">smooth</span>();
  <span class="hljs-built_in">background</span>(<span class="hljs-number">255</span>);

  NUM = <span class="hljs-built_in">width</span>;

  grasses = <span class="hljs-keyword">new </span><span class="hljs-class title_">float</span>[NUM];
  <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; NUM; i++)
  {
    grasses[i] = <span class="hljs-built_in">random</span>(<span class="hljs-number">0</span>, <span class="hljs-number">1</span>) * <span class="hljs-built_in">random</span>(<span class="hljs-number">0.5</span>, <span class="hljs-number">1</span>);
  }
  <span class="hljs-title function_">drawGrasses</span>();
  <span class="hljs-built_in">save</span>(<span class="hljs-string">"grasses.png"</span>);
}

<span class="hljs-keyword">void</span> <span class="hljs-title function_">drawGrasses</span>()
{
  <span class="hljs-built_in">noFill</span>();
  <span class="hljs-built_in">colorMode</span>(HSB);
  <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; NUM; i++)
  {
    <span class="hljs-built_in">stroke</span>(<span class="hljs-built_in">random</span>(<span class="hljs-number">50</span>, <span class="hljs-number">100</span>), <span class="hljs-number">200</span>, <span class="hljs-number">200</span>);
    <span class="hljs-built_in">strokeWeight</span>(<span class="hljs-built_in">width</span> * <span class="hljs-number">0.0015</span> * <span class="hljs-built_in">random</span>(<span class="hljs-number">0.5</span>, <span class="hljs-number">1</span>));

    <span class="hljs-type">int</span> x = i * <span class="hljs-built_in">width</span> / (NUM - <span class="hljs-number">1</span>);
    <span class="hljs-built_in">line</span>(x,
         <span class="hljs-built_in">height</span>,
         x + <span class="hljs-built_in">width</span> * <span class="hljs-built_in">random</span>(<span class="hljs-number">-0.1</span>, <span class="hljs-number">0.1</span>) * <span class="hljs-built_in">random</span>(<span class="hljs-number">-0.15</span>, <span class="hljs-number">0.15</span>),
         <span class="hljs-built_in">height</span> * (<span class="hljs-number">1.0</span> - grasses[i] * <span class="hljs-number">0.3</span> - <span class="hljs-number">0.2</span>));
  }
}
</code></pre></div></div></div><div class="post"><div class="post-header"><h1 class="title"><a href="/blog/2009/10/10/python-challenge-from-0-to-5/">Python Challenge Lv. 0 - 5</a></h1><div class="meta"><span class="date">Oct 10, 2009</span></div></div><div class="content"><div><p>ふと mixi の Python コミュニティを覗いたら <a href="http://www.pythonchallenge.com">Python Challenge</a> なるものを発見。 プログラムを書いて解いてゆくクイズです。面白そうなのでやってみました。 最近マイブームな Ruby で。</p><p>以下、ネタバレ注意です。</p><h2>Level 0</h2><pre><code class="hljs rb"><span class="hljs-number">2</span> ** <span class="hljs-number">38</span>
</code></pre><h2>Level 1</h2><pre><code class="hljs rb">cipher = <span class="hljs-string">"g fmnc wms bgblr rpylqjyrc gr zw fylb. rfyrq ufyr amknsrcpq ypc dmp. bmgle gr gl zw fylb gq glcddgagclr ylb rfyr'q ufw rfgq rcvr gq qm jmle. sqgle qrpgle.kyicrpylq() gq pcamkkclbcb. lmu ynnjw ml rfc spj."</span>
abc = (<span class="hljs-string">"a"</span>[<span class="hljs-number">0</span>] .. <span class="hljs-string">"z"</span>[<span class="hljs-number">0</span>]).to_a
cde = (<span class="hljs-string">"c"</span>[<span class="hljs-number">0</span>] .. <span class="hljs-string">"z"</span>[<span class="hljs-number">0</span>]).to_a + [<span class="hljs-string">"a"</span>[<span class="hljs-number">0</span>], <span class="hljs-string">"b"</span>[<span class="hljs-number">0</span>]]
dict = <span class="hljs-title class_">Hash</span>[*abc.zip(cde).flatten]
cipher.bytes <span class="hljs-keyword">do</span> |<span class="hljs-params">ch</span>|
  ch = dict[ch] <span class="hljs-keyword">if</span> dict.has_key?(ch)
  printf(<span class="hljs-string">"%c"</span>, ch)
<span class="hljs-keyword">end</span>
</code></pre><h2>Level 2</h2><p>ターミナルにコピペしたらおかしくなったので、一旦 mess_2.txt に保存。</p><pre><code class="hljs rb"><span class="hljs-title class_">File</span>.open(<span class="hljs-string">"mess_2.txt"</span>) <span class="hljs-keyword">do</span> |<span class="hljs-params">f</span>|
  <span class="hljs-keyword">while</span> ch = f.getc
    printf(<span class="hljs-string">"%c"</span>, ch) <span class="hljs-keyword">if</span> (<span class="hljs-string">"a"</span>[<span class="hljs-number">0</span>] .. <span class="hljs-string">"z"</span>[<span class="hljs-number">0</span>]).<span class="hljs-keyword">include</span>?(ch)
  <span class="hljs-keyword">end</span>
<span class="hljs-keyword">end</span>
</code></pre><p>ファイルの中身を 1 バイトずつ読み込んで、アルファベットだけ抜き出します。</p><h2>Level 3</h2><pre><code class="hljs rb">pattern = <span class="hljs-regexp">/[^A-Z][A-Z]{3}([a-z])[A-Z]{3}[^A-Z]/</span>
<span class="hljs-title class_">File</span>.open(<span class="hljs-string">"mess_3.txt"</span>) <span class="hljs-keyword">do</span> |<span class="hljs-params">f</span>|
  p f.read.scan(pattern).to_s
<span class="hljs-keyword">end</span>
</code></pre><p>Ruby でグローバルマッチしたい時って <code>String#scan</code> 使うしかないの？</p><h2>Level 4</h2><pre><code class="hljs rb">num = <span class="hljs-string">"12345"</span>
<span class="hljs-keyword">require</span> <span class="hljs-string">"net/http"</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">get_nothing</span>(<span class="hljs-params">num</span>)
  <span class="hljs-keyword">return</span> <span class="hljs-title class_">Net</span><span class="hljs-symbol">:</span><span class="hljs-symbol">:HTTP</span>.get <span class="hljs-variable constant_">URI</span>.parse(<span class="hljs-string">"http://www.pythonchallenge.com/pc/def/linkedlist.php?nothing="</span> + num)
<span class="hljs-keyword">end</span>
<span class="hljs-number">400</span>.times <span class="hljs-keyword">do</span>
  content = get_nothing(num)
  m = <span class="hljs-regexp">/and the next nothing is ([0-9]+)/</span>.match(content)
  p num
  p content
  <span class="hljs-keyword">if</span> m != <span class="hljs-literal">nil</span> <span class="hljs-keyword">then</span>
    num = m[<span class="hljs-number">1</span>]
  <span class="hljs-keyword">else</span>
    exit
  <span class="hljs-keyword">end</span>
<span class="hljs-keyword">end</span>
</code></pre><p>途中でひっかけがありますが・・・。そこは手作業で。</p><h2>Level 5</h2><p>意味がわからずカンニング。 <a href="http://unixwars.com/2007/09/11/python-challenge-level-5-peak-hell/?wscr=1280x800">Python Challenge level 5: “peak hell” | UnixWars</a> Python の Pickle モジュールを使う問題だとか。知らんがな。</p><pre><code class="hljs py"><span class="hljs-keyword">import</span> urllib, pickle
uri = <span class="hljs-string">"http://www.pythonchallenge.com/pc/def/banner.p"</span>
obj = pickle.load(urllib.urlopen(uri))
<span class="hljs-keyword">for</span> line <span class="hljs-keyword">in</span> obj:
  l = <span class="hljs-string">""</span>
  <span class="hljs-keyword">for</span> pair <span class="hljs-keyword">in</span> line:
    l += pair[<span class="hljs-number">0</span>] * pair[<span class="hljs-number">1</span>]
    <span class="hljs-built_in">print</span> l
</code></pre><h2>今日はここまで</h2><p>続きはまた今度。</p></div></div></div><ul class="pagination"><li class="pagination__prev-page"><a href="/blog/pages/30/">Newer posts</a></li><li class="pagination__next-page"><a href="/blog/pages/32/">Older posts</a></li></ul><nav class="footer-nav"><a href="/blog/archives/">All posts</a></nav></div><footer class="footer">© Shuhei Kagawa</footer></div></body></html>