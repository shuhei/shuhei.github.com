{"site":{"title":"Shuhei Kagawa","author":"Shuhei Kagawa","perPage":3,"newPageExtension":"markdown","blogDir":"blog","sourceDir":"source","layoutDir":"_layouts","postDir":"_posts","cssFiles":["node_modules/highlight.js/styles/monokai-sublime.css","source/_css/style.css"]},"post":{"layout":"post","title":"Gulp でブログを書く","date":"2014-06-08 17:23","comments":true,"categories":["JavaScript","gulp"],"url":"/blog/2014/06/08/blog-with-gulp/","content":"<p>もともと Octopress/Jekyll 製だったこのブログを、Ruby を捨てて gulp でページを生成するように書き直しました。</p>\n<p><a href=\"https://github.com/shuhei/shuhei.github.com/blob/source/gulpfile.babel.js\">shuhei.github.io / gulpfile.babel.js</a></p>\n<p>ディレクトリ構成は Octopress そのまま。rake タスクではなく、gulp のタスクでサイトをビルド、デプロイします。</p>\n<p>機能は本当に最小限で、記事ページ、静的ページと index, archive の生成だけです。</p>\n<h2 id=\"-\">経緯</h2>\n<p>動機は Jekyll が重くビルドに時間がかかること。他のもっと良いのがないかなあと思っていたのですが、そもそも大した機能は必要ないので、今年の初めにはまっていた gulp で自作しました。</p>\n<p>ビルドの部分は、ファイルを変換して書き出すという gulp でやりやすいタスクです。ただ GitHub Pages にデプロイする部分は git のコマンド実行が続くため面倒で、その部分だけ gulp で実装せずにRakefile をそのまま残していました。</p>\n<p>どうも気持ち悪かったので、ついに重い腰を上げて書いてみました。当初 child_process を使って書いたのですが、<a href=\"https://github.com/sun-zheng-an/gulp-shell\">gulp-shell</a>を見つけて使うようにしたらすっきりしました。</p>\n<h2 id=\"-\">操作</h2>\n<p>gulp でビルドします。</p>\n<pre><code class=\"hljs shell\">gulp</code></pre><p>表示を確認しながら編集したいときは、以下でローカルにサーバが立ち上がり、ファイル変更時にビルドしなおしてくれます。</p>\n<pre><code class=\"hljs shell\">gulp watch</code></pre><p>デプロイも gulp タスクです。</p>\n<pre><code class=\"hljs shell\">gulp deploy</code></pre><h2 id=\"-\">感想</h2>\n<p>当たり前の感想ですが、gulp はデプロイのようなタスクには向いてないものの、 静的サイトの生成には悪くないなと思いました。</p>\n<p>とは言え、サイト全体の情報を扱うのはやりにくいです。現在は index, archive のページを、各記事の stream から分岐して作っています。また、必要ないと思いサイドバーをつけていないのですが、つける場合には一旦全記事を読み込んでサイドバー向けの情報を作ってから各記事のページにくっつける必要があります。その辺は今後の課題ですかね。</p>\n"}}