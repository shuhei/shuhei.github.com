{"site":{"title":"Shuhei Kagawa","author":"Shuhei Kagawa","perPage":3,"newPageExtension":"markdown","blogDir":"blog","sourceDir":"source","layoutDir":"_layouts","postDir":"_posts","cssFiles":["node_modules/highlight.js/styles/monokai-sublime.css","source/_css/style.css"]},"post":{"layout":"post","title":"OSX 上の MonoDevelop の日本語対応","published":true,"date":"2009-08-22 19:01","comments":true,"tags":null,"categories":null,"url":"/blog/2009/08/22/japanese-in-xml-comment-makes-monodevelop-down/","content":"<p>MonoDevelop Mac Preview 09/07/06 版をインストールしてみました。MonoDevelop 2.2 Beta リリース前のプレビュー版だそうです。<br />\nプレビュー版だけあっていろいろ動作があやしいです。そして日本語、というかマルチバイト対応がさっぱりです。<br />\n以下、できるだけ日本語使えるようにするためのメモ。</p>\n<h3>スタートページやメニューの文字化け</h3>\n<p>まず目につくのがこれ。<br />\n/Library/Framework/Mono.Framework/Version/Current/etc/pango/pango.aliases というファイルを作成し、以下の内容を書くと直るようです。</p>\n<pre class=\"prettyprint\">\"Lucida Grande\" = \"Hiragino Kaku Gothic Pro\"</pre>\n<p>pango なるもののバグだとか。</p>\n<p>via <a href=\"http://kki-zakki.blogspot.com/2008/12/monodevelop-20-alphamac-os-x.html\">っき雑記: MonoDevelop 2.0 AlphaのMac OS X版で日本語を表示する方法</a></p>\n<h3>ファイルは <span class=\"caps\">UTF</span>-8 でないと化ける</h3>\n<p>Shift-<span class=\"caps\">JIS</span> のファイルを <span class=\"caps\">UTF</span>-8 置換しましょう。VisualStudio に戻した時にも問題ないはずです。</p>\n<pre class=\"prettyprint\">find . -name '*.cs' -print0 | xargs -0 nkf -w -Lu --overwrite</pre>\n<h3>なんと日本語が入力できない</h3>\n<p>我慢しましょう。どうしてもという時はコピペができます。</p>\n<h3><span class=\"caps\">XML</span> 内の日本語</h3>\n<p><span class=\"caps\">XML</span>コメントの中の一行で日本語が何文字か続いた後、改行せずにタグを閉じると落ちるようです。<br />\nつまり、以下のようなもの。</p>\n<pre class=\"prettyprint\">/// &lt;param name=\"hoge\"&gt;ほげほげほげ&lt;/param&gt;</pre>\n<p>当面の回避策は、タグを閉じる前に改行することでしょうか。</p>\n<pre class=\"prettyprint\">/// &lt;param name=\"hoge\"&gt;ほげほげほげ\n/// &lt;/param&gt;</pre>\n<p>ちょっとどうかと思いますが、これなら落ちません。</p>\n<h4>置換</h4>\n<pre class=\"prettyprint\">perl -i.bak -pe 's/(\\t+\\/\\/\\/ )(.+)(&lt;\\/(param|returns)&gt;)/$1$2\\n$1$3/mg' hoge.cs</pre>\n<p>一括置換は以下。</p>\n<pre class=\"prettyprint\">find . -name '*.cs' -exec perl -i.bak -pe 's/(\\t+\\/\\/\\/ )(.+)(&lt;\\/(param|returns)&gt;)/$1$2\\n$1$3/mg' {} \\;</pre>"}}