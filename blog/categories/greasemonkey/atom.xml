<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">

  <title><![CDATA[Category: Greasemonkey | Blog]]></title>
  <link href="http://shuhei.github.com/blog/categories/greasemonkey/atom.xml" rel="self"/>
  <link href="http://shuhei.github.com/"/>
  <updated>2013-10-26T23:55:00+09:00</updated>
  <id>http://shuhei.github.com/</id>
  <author>
    <name><![CDATA[Shuhei Kagawa]]></name>
    
  </author>
  <generator uri="http://octopress.org/">Octopress</generator>

  
  <entry>
    <title type="html"><![CDATA[Amazon.co.jp の洋書レビューを Amazon.com で見るための Greasemonkey]]></title>
    <link href="http://shuhei.github.com/blog/2008/06/21/amazon-dot-com-reviewer/"/>
    <updated>2008-06-21T23:58:00+09:00</updated>
    <id>http://shuhei.github.com/blog/2008/06/21/amazon-dot-com-reviewer</id>
    <content type="html"><![CDATA[<p>Amazon.co.jp で洋書を見ると、レビューがほとんどありません。
一方、Amazon.com に行けばレビューがたくさんあります。
ですが同じ本のページを探すのに、 ISBN をコピペしたり検索し直したりするのは、ちょっとした手間ですね。</p>

<p>そこで、Greasemonkey のuser script を書いてみました。</p>

<p>本の題名のすぐ下に、リンクができます。
amazon.co.jp からは amazon.com の、amazon.com からは amazon.co.jp の、それぞれ同じ本のページへのリンクです。
洋書のレビューを amazon.com で探したり、また amazon.com で見つけた本を amazon.co.jp で買う際に地味に便利です。</p>

<p>```js amazondotcomreviewer.user.js
// ==UserScript==
// @name           AmazonDotComReviewer 0.1
// @namespace      <a href="http://www.7to3.net">http://www.7to3.net</a>
// @description    Make link between amazon.com and amazon.co.jp
// @include        <a href="http://*.amazon.*">http://*.amazon.*</a>
// ==/UserScript==</p>

<p>(function() {</p>

<pre><code>var isbnmatch = window.location.href.match(/amazon\.(com|co\.jp)\/.*\/([0-1][0-9A-Z]{9})\//);
var header = document.getElementById('btAsinTitle');

if (header &amp;&amp; isbnmatch) {
    domain = (isbnmatch[1] === 'com') ? 'co.jp' : 'com';
    isbn = isbnmatch[2];

    var uslink = document.createElement('a');
    uslink.setAttribute('href', 'http://www.amazon.' + domain + '/o/ASIN/' + isbn + '/');
    uslink.setAttribute('title', 'The same book at amazon.' + domain);
    uslink.innerHTML = "&lt;br /&gt;&amp;#187; Check also amazon." + domain + "!";

    header.insertBefore(uslink, header.firstChild.nextSibling);
}
return false;
</code></pre>

<p>}
)();
```</p>
]]></content>
  </entry>
  
</feed>
