{"site":{"title":"Shuhei Kagawa","author":"Shuhei Kagawa","perPage":3,"newPageExtension":"markdown","blogDir":"blog","sourceDir":"source","layoutDir":"_layouts","postDir":"_posts"},"post":{"layout":"post","title":"Category index for Octopress","date":"2012-04-03 09:20","comments":true,"categories":["Octopress"],"url":"/blog/2012/04/03/category-index-for-octopress/","content":"<p>サイドバーにカテゴリー一覧を出してみました。</p>\n<p>_config.yml</p>\n<pre><code class=\"hljs diff\">diff --git a/_config.yml b/_config.yml\nindex 5c7d335..7ad03bb 100644\n<span class=\"hljs-header\">--- a/_config.yml</span>\n<span class=\"hljs-header\">+++ b/_config.yml</span>\n@@ -45,7 +45,7 @@ titlecase: true       # Converts page and post titles to titlecase\n\n # list each of the sidebar modules you want to include, in the order you want them to appear.\n # To add custom asides, create files in /source/_includes/custom/asides/ and add them to the list like 'custom/asides/custom_aside_name.html'\n<span class=\"hljs-deletion\">-default_asides: [asides/recent_posts.html, asides/github.html, asides/twitter.html, asides/delicious.html, asides/pinboard.html, asides/googleplus.html]</span>\n<span class=\"hljs-addition\">+default_asides: [asides/recent_posts.html, custom/asides/categories.html, asides/github.html, asides/twitter.html, asides/delicious.html, asides/pinboard.</span>\n\n # Each layout uses the default asides, but they can have their own asides instead. Simply uncomment the lines below\n # and add an array with the asides you want to use.</code></pre><p>source/_includes/custom/asides/categories.html</p>\n<pre><code class=\"hljs html\"><span class=\"hljs-tag\">&lt;<span class=\"hljs-title\">section</span>&gt;</span>\n  <span class=\"hljs-tag\">&lt;<span class=\"hljs-title\">h1</span>&gt;</span>Categories<span class=\"hljs-tag\">&lt;/<span class=\"hljs-title\">h1</span>&gt;</span>\n  <span class=\"hljs-tag\">&lt;<span class=\"hljs-title\">ul</span>&gt;</span>\n    {% for category in site.categories %}\n      <span class=\"hljs-tag\">&lt;<span class=\"hljs-title\">li</span>&gt;</span>{{ category | category_link }}<span class=\"hljs-tag\">&lt;/<span class=\"hljs-title\">li</span>&gt;</span>\n    {% endfor %}\n  <span class=\"hljs-tag\">&lt;/<span class=\"hljs-title\">ul</span>&gt;</span>\n<span class=\"hljs-tag\">&lt;/<span class=\"hljs-title\">section</span>&gt;</span></code></pre><p>2013-10-27 編集: 現在はデフォルトで <code>category_link</code> メソッドが追加されているので、以下の修正は不要です。</p>\n<p>plugins/category_generator.rb</p>\n<pre><code class=\"hljs diff\">diff --git a/plugins/category_generator.rb b/plugins/category_generator.rb\nindex bb5fd32..28bf7e0 100644\n<span class=\"hljs-header\">--- a/plugins/category_generator.rb</span>\n<span class=\"hljs-header\">+++ b/plugins/category_generator.rb</span>\n@@ -156,6 +156,18 @@ module Jekyll\n       end\n     end\n\n<span class=\"hljs-addition\">+    # Outputs a link of a category.</span>\n<span class=\"hljs-addition\">+    # </span>\n<span class=\"hljs-addition\">+    #  +category+ is an item of site.categories.</span>\n<span class=\"hljs-addition\">+    #</span>\n<span class=\"hljs-addition\">+    # Returns string</span>\n<span class=\"hljs-addition\">+    # </span>\n<span class=\"hljs-addition\">+    def category_link(category)</span>\n<span class=\"hljs-addition\">+      dir = @context.registers[:site].config['category_dir']</span>\n<span class=\"hljs-addition\">+      category = category[0]</span>\n<span class=\"hljs-addition\">+      \"&lt;a class='category' href='/#{dir}/#{category.gsub(/_|\\P{Word}/, '-').gsub(/-{2,}/, '-').downcase}/'&gt;#{category}&lt;/a&gt;\"</span>\n<span class=\"hljs-addition\">+    end</span>\n<span class=\"hljs-addition\">+</span>\n     # Outputs the post.date as formatted html, with hooks for CSS styling.\n     #\n     #  +date+ is the date object to format as HTML.</code></pre><p>Gist: <a href=\"https://gist.github.com/shuhei/2288181\">Add a category index to Octopress</a></p>\n"}}